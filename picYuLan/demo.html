<!-- zhouxiang www.zhou-xiang.com -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>uploadPreview演示</title>
    <script src="uploadPreview.js" type="text/javascript"></script>
	<script type="text/javascript" src="jquery-1.7.js"></script>
	<style type="text/css">
		div {display:inline-block;margin-right:10px;}
	</style>
    <script>
		var count = 0;
		function add(t){
			//获取所需的id值
			var ts = $(t);
			var up_id = ts.next().attr("id");
			var div_id = ts.parent("div").attr("id");
			var img_id = ts.attr("id");
			//alert(up_id + " " + div_id + " " + img_id);
			//点击上传预览
			$("#"+up_id).click();
			new uploadPreview({ UpBtn: up_id, DivShow: div_id, ImgShow: img_id });
			
			var imgName = $("#"+img_id).parent("div").find("img").attr("src");
			if(imgName == "photo_icon.png"){
				//设置元素id自动递增
				count++;
				//新增
				var addDiv = "<div id='imgdiv"+count+"'><img id='imgShow"+count+"' src='photo_icon.png' width='100' height='100' onClick='add(this);'/><input type='file' id='up_img"+count+"' style='display: none;'/></div>"
				$("div:last").after(addDiv);
			}
			
		}
		
    </script>
</head>
<body>
    <div id="imgdiv">
		<img id="imgShow" src="photo_icon.png" width="100" height="100"  onClick="add(this);"/>
		<input type="file" id="up_img" style="display: none;"/>
	</div>
</body>
</html>
